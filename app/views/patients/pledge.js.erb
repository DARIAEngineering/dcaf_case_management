$('.modal-content').html('')
$('.modal-content').append(
  '<%= escape_javascript(render partial: "patients/pledge", locals: { patient: @patient, disable_next: disable_continue?(@patient) })%>'
);

<% if (!@patient.pledge_sent) %>

  $('.js-title-step span').slice(1).remove();
  var el = $(".js-title-step").contents()

  if (el.length > 2) {
    el.slice(2,el.length).remove();
  }

  $('.modal').modalSteps({
    completeCallback: function() {
      console.log(':)');
      $('.modal-content').html('');
    },
  });

<% else %>
  $('#cancel-pledge-form').on('submit', function() {
    $('.modal').modal('hide');
  })
<% end %>

$('.modal').modal('toggle');
